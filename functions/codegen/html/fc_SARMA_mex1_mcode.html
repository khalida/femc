<!-- saved from url=(0014)about:internet -->
<pre class="code">
<span class="srcline"><span class="lineno"><a href="1,1" id="srcline1"> 1</a></span><span class="line"><span class="keyword">function</span> <span class="var type1" id="S2T1U3">fc</span> = fc_SARMA_mex(<span class="var type1" id="S3T1U6">demand</span>, <span class="var type1" id="S4T16U7">theta</span>, <span class="var type1" id="S5T2U8">phi</span>, <span class="var type1" id="S6T2U9">k</span>) <span class="comment">%#codegen</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,2" id="srcline2"> 2</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,3" id="srcline3"> 3</a></span><span class="line"><span class="comment">% Assert input types</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,4" id="srcline4"> 4</a></span><span class="line"><span class="mxinfo " id="T17:U6"><span class="extrinsicFcn" id="F16N2:B12">assert</span>(<span class="mxinfo " id="T3:U7">all(<span class="mxinfo " id="T6:U8"><span class="mxinfo " id="T15:U9">size(<span class="var type1" id="S3T1U18">demand</span>)</span> == <span class="mxinfo " id="T15:U11">[<span class="var type1" id="S6T2U21">k</span> <span class="mxinfo " id="T2:U13">1</span>]</span></span>)</span>)</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,5" id="srcline5"> 5</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,6" id="srcline6"> 6</a></span><span class="line"><span class="mxinfo " id="T1:U14"><span class="var type1" id="S2T1U25">fc</span> = <span class="mxinfo " id="T1:U16">zeros(<span class="mxinfo " id="T15:U17">size(<span class="var type1" id="S3T1U30">demand</span>)</span>, <span class="string">'like'</span>, <span class="var type1" id="S3T1U32">demand</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,7" id="srcline7"> 7</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,8" id="srcline8"> 8</a></span><span class="line"><span class="keyword">for</span> <span class="var type1" id="S11T2U35">this_k</span> = <span class="mxinfo " id="T2:U21">1</span>:<span class="var type1" id="S6T2U38">k</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,9" id="srcline9"> 9</a></span><span class="line">    <span class="keyword">if</span>(<span class="mxinfo " id="T3:U23"><span class="var type1" id="S11T2U43">this_k</span>&lt;=<span class="mxinfo " id="T2:U25">1</span></span>)</span></span>
<span class="srcline"><span class="lineno"><a href="1,10" id="srcline10">10</a></span><span class="line">        <span class="mxinfo " id="T2:U26"><span class="mxinfo " id="T2:U27"><span class="var type1" id="S2T1U48">fc</span>(<span class="var type1" id="S11T2U49">this_k</span>)</span> =  <span class="mxinfo " id="T2:U30"><span class="mxinfo " id="T2:U31"><span class="mxinfo " id="T2:U32"><span class="mxinfo " id="T2:U33"><span class="mxinfo " id="T2:U34"><span class="var type1" id="S4T16U55">theta</span>(<span class="mxinfo " id="T2:U36">1</span>)</span>*<span class="mxinfo " id="T2:U37"><span class="var type1" id="S3T1U58">demand</span>(<span class="mxinfo " id="T2:U39"><span class="mxinfo " id="T2:U40"><span class="mxinfo " id="T2:U41">end</span> + <span class="var type1" id="S11T2U63">this_k</span></span> - <span class="mxinfo " id="T2:U43">1</span></span>)</span></span> + <span class="mxinfo " id="T2:U44"><span class="mxinfo " id="T2:U45"><span class="var type1" id="S4T16U67">theta</span>(<span class="mxinfo " id="T2:U47">2</span>)</span>*<span class="mxinfo " id="T2:U48"><span class="var type1" id="S3T1U70">demand</span>(<span class="mxinfo " id="T2:U50"><span class="mxinfo " id="T2:U51"><span class="mxinfo " id="T2:U52">end</span> + <span class="var type1" id="S11T2U75">this_k</span></span> - <span class="mxinfo " id="T2:U54">2</span></span>)</span></span></span> + <span class="keyword">...</span></span></span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,11" id="srcline11">11</a></span><span class="line"><span class="mxinfo " id="T2:U26"><span class="mxinfo " id="T2:U30"><span class="mxinfo " id="T2:U31">            <span class="mxinfo " id="T2:U55"><span class="mxinfo " id="T2:U56"><span class="var type1" id="S4T16U79">theta</span>(<span class="mxinfo " id="T2:U58">3</span>)</span>*<span class="mxinfo " id="T2:U59"><span class="var type1" id="S3T1U82">demand</span>(<span class="mxinfo " id="T2:U61"><span class="mxinfo " id="T2:U62"><span class="mxinfo " id="T2:U63">end</span> + <span class="var type1" id="S11T2U87">this_k</span></span> - <span class="mxinfo " id="T2:U65">3</span></span>)</span></span></span> + <span class="mxinfo " id="T2:U66"><span class="var type1" id="S5T2U90">phi</span>*<span class="mxinfo " id="T2:U68"><span class="var type1" id="S3T1U92">demand</span>(<span class="mxinfo " id="T2:U70"><span class="mxinfo " id="T2:U71"><span class="mxinfo " id="T2:U72">end</span> + <span class="var type1" id="S11T2U97">this_k</span></span> - <span class="var type1" id="S6T2U98">k</span></span>)</span></span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,12" id="srcline12">12</a></span><span class="line">        </span></span>
<span class="srcline"><span class="lineno"><a href="1,13" id="srcline13">13</a></span><span class="line">    <span class="keyword">elseif</span>(<span class="mxinfo " id="T3:U75"><span class="var type1" id="S11T2U102">this_k</span>&lt;=<span class="mxinfo " id="T2:U77">2</span></span>)</span></span>
<span class="srcline"><span class="lineno"><a href="1,14" id="srcline14">14</a></span><span class="line">        <span class="mxinfo " id="T2:U78"><span class="mxinfo " id="T2:U79"><span class="var type1" id="S2T1U107">fc</span>(<span class="var type1" id="S11T2U108">this_k</span>)</span> =  <span class="mxinfo " id="T2:U82"><span class="mxinfo " id="T2:U83"><span class="mxinfo " id="T2:U84"><span class="mxinfo " id="T2:U85"><span class="mxinfo " id="T2:U86"><span class="var type1" id="S4T16U114">theta</span>(<span class="mxinfo " id="T2:U88">1</span>)</span>*<span class="mxinfo " id="T2:U89"><span class="var type1" id="S2T1U117">fc</span>(<span class="mxinfo " id="T2:U91"><span class="var type1" id="S11T2U119">this_k</span> - <span class="mxinfo " id="T2:U93">1</span></span>)</span></span> + <span class="mxinfo " id="T2:U94"><span class="mxinfo " id="T2:U95"><span class="var type1" id="S4T16U123">theta</span>(<span class="mxinfo " id="T2:U97">2</span>)</span>*<span class="mxinfo " id="T2:U98"><span class="var type1" id="S3T1U126">demand</span>(<span class="mxinfo " id="T2:U100"><span class="mxinfo " id="T2:U101"><span class="mxinfo " id="T2:U102">end</span> + <span class="mxinfo " id="T2:U103"><span class="var type1" id="S11T2U131">this_k</span></span></span> - <span class="mxinfo " id="T2:U105">2</span></span>)</span></span></span> + <span class="keyword">...</span></span></span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,15" id="srcline15">15</a></span><span class="line"><span class="mxinfo " id="T2:U78"><span class="mxinfo " id="T2:U82"><span class="mxinfo " id="T2:U83">            <span class="mxinfo " id="T2:U106"><span class="mxinfo " id="T2:U107"><span class="var type1" id="S4T16U135">theta</span>(<span class="mxinfo " id="T2:U109">3</span>)</span>*<span class="mxinfo " id="T2:U110"><span class="var type1" id="S3T1U138">demand</span>(<span class="mxinfo " id="T2:U112"><span class="mxinfo " id="T2:U113"><span class="mxinfo " id="T2:U114">end</span> + <span class="mxinfo " id="T2:U115"><span class="var type1" id="S11T2U143">this_k</span></span></span> - <span class="mxinfo " id="T2:U117">3</span></span>)</span></span></span> + <span class="mxinfo " id="T2:U118"><span class="var type1" id="S5T2U146">phi</span>*<span class="mxinfo " id="T2:U120"><span class="var type1" id="S3T1U148">demand</span>(<span class="mxinfo " id="T2:U122"><span class="mxinfo " id="T2:U123"><span class="mxinfo " id="T2:U124">end</span> + <span class="mxinfo " id="T2:U125"><span class="var type1" id="S11T2U153">this_k</span></span></span> - <span class="var type1" id="S6T2U154">k</span></span>)</span></span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,16" id="srcline16">16</a></span><span class="line">        </span></span>
<span class="srcline"><span class="lineno"><a href="1,17" id="srcline17">17</a></span><span class="line">    <span class="keyword">elseif</span>(<span class="mxinfo " id="T3:U128"><span class="var type1" id="S11T2U158">this_k</span>&lt;=<span class="mxinfo " id="T2:U130">3</span></span>)</span></span>
<span class="srcline"><span class="lineno"><a href="1,18" id="srcline18">18</a></span><span class="line">        <span class="mxinfo " id="T2:U131"><span class="mxinfo " id="T2:U132"><span class="var type1" id="S2T1U163">fc</span>(<span class="var type1" id="S11T2U164">this_k</span>)</span> =  <span class="mxinfo " id="T2:U135"><span class="mxinfo " id="T2:U136"><span class="mxinfo " id="T2:U137"><span class="mxinfo " id="T2:U138"><span class="mxinfo " id="T2:U139"><span class="var type1" id="S4T16U170">theta</span>(<span class="mxinfo " id="T2:U141">1</span>)</span>*<span class="mxinfo " id="T2:U142"><span class="var type1" id="S2T1U173">fc</span>(<span class="mxinfo " id="T2:U144"><span class="var type1" id="S11T2U175">this_k</span> - <span class="mxinfo " id="T2:U146">1</span></span>)</span></span> + <span class="mxinfo " id="T2:U147"><span class="mxinfo " id="T2:U148"><span class="var type1" id="S4T16U179">theta</span>(<span class="mxinfo " id="T2:U150">2</span>)</span>*<span class="mxinfo " id="T2:U151"><span class="var type1" id="S2T1U182">fc</span>(<span class="mxinfo " id="T2:U153"><span class="var type1" id="S11T2U184">this_k</span> - <span class="mxinfo " id="T2:U155">2</span></span>)</span></span></span> + <span class="keyword">...</span></span></span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,19" id="srcline19">19</a></span><span class="line"><span class="mxinfo " id="T2:U131"><span class="mxinfo " id="T2:U135"><span class="mxinfo " id="T2:U136">            <span class="mxinfo " id="T2:U156"><span class="mxinfo " id="T2:U157"><span class="var type1" id="S4T16U188">theta</span>(<span class="mxinfo " id="T2:U159">3</span>)</span>*<span class="mxinfo " id="T2:U160"><span class="var type1" id="S3T1U191">demand</span>(<span class="mxinfo " id="T2:U162"><span class="mxinfo " id="T2:U163"><span class="mxinfo " id="T2:U164">end</span> + <span class="mxinfo " id="T2:U165"><span class="var type1" id="S11T2U196">this_k</span></span></span> - <span class="mxinfo " id="T2:U167">3</span></span>)</span></span></span> + <span class="mxinfo " id="T2:U168"><span class="var type1" id="S5T2U199">phi</span>*<span class="mxinfo " id="T2:U170"><span class="var type1" id="S3T1U201">demand</span>(<span class="mxinfo " id="T2:U172"><span class="mxinfo " id="T2:U173"><span class="mxinfo " id="T2:U174">end</span> + <span class="mxinfo " id="T2:U175"><span class="var type1" id="S11T2U206">this_k</span></span></span> - <span class="var type1" id="S6T2U207">k</span></span>)</span></span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,20" id="srcline20">20</a></span><span class="line">        </span></span>
<span class="srcline"><span class="lineno"><a href="1,21" id="srcline21">21</a></span><span class="line">    <span class="keyword">elseif</span>(<span class="mxinfo " id="T3:U178"><span class="var type1" id="S11T2U211">this_k</span>&lt;=<span class="var type1" id="S6T2U212">k</span></span>)</span></span>
<span class="srcline"><span class="lineno"><a href="1,22" id="srcline22">22</a></span><span class="line">        <span class="mxinfo " id="T2:U181"><span class="mxinfo " id="T2:U182"><span class="var type1" id="S2T1U216">fc</span>(<span class="var type1" id="S11T2U217">this_k</span>)</span> =  <span class="mxinfo " id="T2:U185"><span class="mxinfo " id="T2:U186"><span class="mxinfo " id="T2:U187"><span class="mxinfo " id="T2:U188"><span class="mxinfo " id="T2:U189"><span class="var type1" id="S4T16U223">theta</span>(<span class="mxinfo " id="T2:U191">1</span>)</span>*<span class="mxinfo " id="T2:U192"><span class="var type1" id="S2T1U226">fc</span>(<span class="mxinfo " id="T2:U194"><span class="var type1" id="S11T2U228">this_k</span> - <span class="mxinfo " id="T2:U196">1</span></span>)</span></span> + <span class="mxinfo " id="T2:U197"><span class="mxinfo " id="T2:U198"><span class="var type1" id="S4T16U232">theta</span>(<span class="mxinfo " id="T2:U200">2</span>)</span>*<span class="mxinfo " id="T2:U201"><span class="var type1" id="S2T1U235">fc</span>(<span class="mxinfo " id="T2:U203"><span class="var type1" id="S11T2U237">this_k</span> - <span class="mxinfo " id="T2:U205">2</span></span>)</span></span></span> + <span class="keyword">...</span></span></span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,23" id="srcline23">23</a></span><span class="line"><span class="mxinfo " id="T2:U181"><span class="mxinfo " id="T2:U185"><span class="mxinfo " id="T2:U186">            <span class="mxinfo " id="T2:U206"><span class="mxinfo " id="T2:U207"><span class="var type1" id="S4T16U241">theta</span>(<span class="mxinfo " id="T2:U209">3</span>)</span>*<span class="mxinfo " id="T2:U210"><span class="var type1" id="S2T1U244">fc</span>(<span class="mxinfo " id="T2:U212"><span class="var type1" id="S11T2U246">this_k</span> - <span class="mxinfo " id="T2:U214">3</span></span>)</span></span></span> + <span class="mxinfo " id="T2:U215"><span class="var type1" id="S5T2U249">phi</span>*<span class="mxinfo " id="T2:U217"><span class="var type1" id="S3T1U251">demand</span>(<span class="mxinfo " id="T2:U219"><span class="mxinfo " id="T2:U220"><span class="mxinfo " id="T2:U221">end</span> + <span class="var type1" id="S11T2U256">this_k</span></span> - <span class="var type1" id="S6T2U257">k</span></span>)</span></span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,24" id="srcline24">24</a></span><span class="line">        </span></span>
<span class="srcline"><span class="lineno"><a href="1,25" id="srcline25">25</a></span><span class="line">    <span class="keyword">else</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,26" id="srcline26">26</a></span><span class="line">        <span class="mxinfo " id="T2:U224"><span class="mxinfo " id="T2:U225"><span class="var type1" id="S2T1U262">fc</span>(<span class="var type1" id="S11T2U263">this_k</span>)</span> =  <span class="mxinfo " id="T2:U228"><span class="mxinfo " id="T2:U229"><span class="mxinfo " id="T2:U230"><span class="mxinfo " id="T2:U231"><span class="mxinfo " id="T2:U232"><span class="var type1" id="S4T16U269">theta</span>(<span class="mxinfo " id="T2:U234">1</span>)</span>*<span class="mxinfo " id="T2:U235"><span class="var type1" id="S2T1U272">fc</span>(<span class="mxinfo " id="T2:U237"><span class="var type1" id="S11T2U274">this_k</span> - <span class="mxinfo " id="T2:U239">1</span></span>)</span></span> + <span class="mxinfo " id="T2:U240"><span class="mxinfo " id="T2:U241"><span class="var type1" id="S4T16U278">theta</span>(<span class="mxinfo " id="T2:U243">2</span>)</span>*<span class="mxinfo " id="T2:U244"><span class="var type1" id="S2T1U281">fc</span>(<span class="mxinfo " id="T2:U246"><span class="var type1" id="S11T2U283">this_k</span> - <span class="mxinfo " id="T2:U248">2</span></span>)</span></span></span> + <span class="keyword">...</span></span></span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,27" id="srcline27">27</a></span><span class="line"><span class="mxinfo " id="T2:U224"><span class="mxinfo " id="T2:U228"><span class="mxinfo " id="T2:U229">            <span class="mxinfo " id="T2:U249"><span class="mxinfo " id="T2:U250"><span class="var type1" id="S4T16U287">theta</span>(<span class="mxinfo " id="T2:U252">3</span>)</span>*<span class="mxinfo " id="T2:U253"><span class="var type1" id="S2T1U290">fc</span>(<span class="mxinfo " id="T2:U255"><span class="var type1" id="S11T2U292">this_k</span> - <span class="mxinfo " id="T2:U257">3</span></span>)</span></span></span> + <span class="mxinfo " id="T2:U258"><span class="var type1" id="S5T2U295">phi</span>*<span class="mxinfo " id="T2:U260"><span class="var type1" id="S2T1U297">fc</span>(<span class="mxinfo " id="T2:U262"><span class="var type1" id="S11T2U299">this_k</span> - <span class="var type1" id="S6T2U300">k</span></span>)</span></span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,28" id="srcline28">28</a></span><span class="line">    <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,29" id="srcline29">29</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,30" id="srcline30">30</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,31" id="srcline31">31</a></span><span class="line"><span class="keyword">end</span></span></span>
</pre>
